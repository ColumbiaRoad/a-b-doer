"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.useState=exports.useEffect=exports.useHook=exports.useRef=void 0;var _internal=require("./utils/internal");var _render=require("./utils/render");const useRef=(current=null)=>{if(!_internal.hooks.h[_internal.hooks.c]){_internal.hooks.h[_internal.hooks.c]={current}}const ret=_internal.hooks.h[_internal.hooks.c];_internal.hooks.c++;return ret};exports.useRef=useRef;const useHook=cb=>{setTimeout(cb,0)};exports.useHook=useHook;const useEffect=(cb,deps)=>{const oldDeps=_internal.hooks.h[_internal.hooks.c]||[];let same=true;for(let index=0;index<deps.length;index++){if(deps[index]!==oldDeps[index]){same=false;break}}if(!same){_internal.hooks.h[_internal.hooks.c]=deps;setTimeout(cb)}_internal.hooks.c++};exports.useEffect=useEffect;const useState=defaultValue=>{if(!_internal.hooks.h[_internal.hooks.c]){_internal.hooks.h[_internal.hooks.c]=[defaultValue,((index,vnode)=>value=>{_internal.hooks.h[index][0]=value;if(vnode){setTimeout(()=>{(0,_render.render)(vnode)})}})(_internal.hooks.c,_internal.hooks.v)]}const state=_internal.hooks.h[_internal.hooks.c];_internal.hooks.c++;return state};exports.useState=useState;
